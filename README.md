# 資料庫匯入管理工具 (DB Importer & Manager)

這是一個使用 Python 開發的圖形化介面工具，旨在簡化資料庫之間的資料遷移以及檔案到資料庫的匯入流程。本工具特別適合需要頻繁處理 Excel/CSV 檔案並將其匯入 MySQL 資料庫的使用者。

## 主要功能

本工具提供以下幾個核心功能頁籤：

### 1. SQLite 複製到 MySQL
- **快速遷移**: 瀏覽並選擇一個本機的 SQLite 資料庫檔案 (`.db`, `.sqlite`)。
- **資料表選擇**: 自動讀取並列出 SQLite 檔案中的所有資料表。
- **一鍵複製**: 將選定的 SQLite 資料表及其完整結構和所有資料，快速複製到目標 MySQL 資料庫中。

### 2. MySQL 資料表管理
- **即時檢視**: 瀏覽目前 MySQL 資料庫中的所有資料表。
- **結構分析**: 點擊任一資料表，即可檢視其詳細的欄位結構（型態、主鍵、預設值等）。
- **資料預覽與操作**:
    - 分頁顯示資料表內容，方便瀏覽大量資料。
    - 直接在介面中**新增**、**刪除**選定的資料列。
- **資料表管理**:
    - 刪除不再需要的資料表。
    - (功能簡化，暫不提供手動創建)

### 3. 檔案匯入工具 (Excel/CSV)
這是此工具最強大的功能，提供高度客製化的檔案匯入流程。

- **雙模式匯入**:
    - **單一檔案模式**: 選擇並匯入單個 `.xlsx`, `.xls`, 或 `.csv` 檔案。
    - **資料夾模式**: 選擇一個資料夾，工具會批次匯入其中所有符合條件的檔案。
- **強大的資料轉換工具**:
    - **移除頂部多餘行**: 匯入前可自動移除檔案頂部的任意行數（例如註解或標題）。
    - **提升為標題列**: 可將資料的第一行提升為資料表的欄位名稱。
    - **檔名篩選**: 在資料夾模式下，可輸入關鍵字篩選要處理的檔案。
    - **新增檔案來源**: 自動新增一個 `檔案來源` 欄位，記錄每筆資料來自哪個檔案，方便追溯。
    - **去除重複資料**: 在匯入前自動去除完全重複的資料行。
- **智慧匯入選項**:
    - **覆蓋 (Overwrite)**: 如果目標資料表已存在，則先刪除再重建。
    - **附加 (Append)**: 將新資料附加到現有資料表的末尾。
    - **失敗 (Fail)**: 如果目標資料表已存在，則中斷操作以保護現有資料。
- **即時預覽**: 所有轉換操作都會即時更新在資料預覽區，確保匯入的資料符合預期。

### 4. 操作與偵錯日誌
- **操作日誌**: 記錄使用者對資料庫的每一次重要操作（如刪除、新增資料），方便追蹤。
- **偵錯日誌**: 所有後端執行的詳細步驟、SQL 查詢和潛在錯誤都會被記錄在 `db_importer_debug.log` 檔案中，並同步顯示於介面，方便排查問題。

## 環境設定

本專案使用 Python 3 進行開發。

1.  **建立並啟用虛擬環境** (強烈建議):
    ```bash
    # 建立一個名為 venv 的虛擬環境
    python -m venv venv

    # 在 Windows 上啟用
    .\venv\Scripts\activate

    # 在 macOS/Linux 上啟用
    source venv/bin/activate
    ```

2.  **安裝相依套件**:
    專案所需的所有 Python 套件都記錄在 `requirements.txt` 中。執行以下指令進行一鍵安裝：
    ```bash
    pip install -r requirements.txt
    ```

## 如何執行

1.  確認您已完成上述**環境設定**步驟，並已啟用虛擬環境。
2.  在專案的根目錄下，執行 `run.py` 檔案：
    ```bash
    python run.py
    ```
3.  程式啟動後，會首先彈出一個**登入視窗**。請在此輸入您的 MySQL **使用者名稱**和**密碼**。
    - **主機位址**: 固定為 `mysql.theaken.com:33306`。
    - **目標資料庫**: 程式會根據您輸入的使用者名稱，自動嘗試連線到 `db_{使用者名稱}` 這個資料庫。
4.  登入成功後，主應用程式視窗將會開啟，您可以開始使用各項功能。

## 專案結構

```
DB_Importer_Tool/
├── src/
│   └── app.py              # 主應用程式 (包含所有 GUI 介面與核心邏輯)
├── .gitignore              # Git 忽略清單
├── README.md               # 專案說明文件 (就是您正在閱讀的檔案)
├── requirements.txt        # Python 相依套件列表
└── run.py                  # 程式進入點 (包含登入視窗邏輯)
```